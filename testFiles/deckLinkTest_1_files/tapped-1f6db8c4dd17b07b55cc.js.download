webpackJsonp([6],{516:function(t,e,n){n(517),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(562),n(563),n(564),t.exports=n(565)},517:function(t,e,n){(function(t,e){function n(t,e,n){var a="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),a="; expires="+i.toUTCString()}document.cookie=t+"="+(e||"")+a+"; path=/"}function a(t){for(var e=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null}function i(e){var n=e.element;return'<i class="fa '+t(n).data("icon")+'"></i> '+e.text}function o(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}function r(t){var e=document.location.host,n=document.location.protocol,a="//"+e,i=n+a;return t==i||t.slice(0,i.length+1)==i+"/"||t==a||t.slice(0,a.length+1)==a+"/"||!/^(\/\/|http:|https:).*/.test(t)}window.getCookie=a,window.setCookie=n,window.iformat=i;var l=a("csrftoken");window.quantityRequest=null,t.ajaxSetup({beforeSend:function(t,e){!o(e.type)&&r(e.url)&&t.setRequestHeader("X-CSRFToken",l)}}),TAPPED=function(n){return n={},n.getBrowserGeo=function(e,n){var a=!1;n=n||t.noop,setTimeout(function(){a||(console.log("geo request timedout"),n())},5e3),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){a=!0,TAPPED.currentLat=t.coords.latitude,TAPPED.currentLon=t.coords.longitude,void 0!==e&&e(TAPPED.currentLat,TAPPED.currentLon)},function(){a=!0,n()})},n.changeQuantity=function(e,n,a){t.ajax({url:e,data:{changes:JSON.stringify(n)},dataType:"json",type:"put",error:function(t){t.status>=500?alert("There was a site-error while attempting that action"):alert("There was a problem with that action: "+t.responseText)},success:a,complete:function(){window.quantityRequest=null}})},n.observeCards=function(e){e=e||{};var a=e.attr?e.attr:"body";e.vendors&&0!==e.vendors.length||(e.vendors=["TCG","CH"]),t(a).popover({html:!0,trigger:"hover",content:function(){if(void 0==t(this).data("rendering")){var a=n.setupTemplate(t(this).find(".card-hover"),"#card-hover-template",e.vendors);t(this).data("rendering",a)}return t(this).data("rendering")},title:function(){return t(this).children("a.card-hover").text()},selector:"span.card",container:"body"})},n.setupTemplate=function(n,a,i,o){var r=t(a).html(),l=e.compile(r),c=t(n).data(),s=[],d={tcg:"TCG Player NM",ch:"CardHoarder (MTGO)",ck:"Card Kingdom",cc:"Chaos Cards"};return t.each(i,function(t,e){var n=e.toLowerCase(),a=c.foil&&c[n+"FoilPrice"]?c[n+"FoilPrice"]:c[n+"Price"],i=c.foil&&c[n+"FoilUrl"]?c[n+"FoilUrl"]:c[n+"Url"];a||"ch"!==n||(a=c.foil&&c.cardhoarderFoilPrice?c.cardhoarderFoilPrice:c.cardhoarderPrice,i=c.foil&&c[n+"cardhoarderFoilUrl"]?c[n+"cardhoarderFoilUrl"]:c[n+"cardhoarderUrl"]),a&&("ch"===n?a+=" TIX":a="cc"===n?"Â£"+a:"$"+a,e=o&&n in d?d[n]:e,s.push({name:e,price:a,url:i}))}),t.each(s,function(t,e){t+1<s.length&&(e.next=!0)}),c.foil=c.foil&&!c.animatedImage,l({data:c,STATIC_URL:STATIC_URL,url:t(n).attr("href"),vendors:s})},n.observeCardsMobile=function(e){e=e||{},e.vendors&&0!==e.vendors.length||(e.vendors=["TCG","CH"]),t("body").on("click","span.card > a",function(a){if(a.preventDefault(),0==t(this).parent().find(".modal").length){var i=n.setupTemplate(this,"#card-hover-template-mobile",e.vendors,!0);t(this).parent().append(i)}t(this).parent().find(".modal").modal("show")})},n.observeBoardCards=function(e){e=e||{};var a=e.attr?e.attr:"body";e.vendors&&0!==e.vendors.length||(e.vendors=["TCG","CH"]),t(a).popover({html:!0,trigger:"hover",content:function(){if(void 0==t(this).data("rendering")){var a=n.setupTemplate(t(this).find(".board-card-hover"),"#card-hover-template",e.vendors);t(this).data("rendering",a)}return t(this).data("rendering")},title:function(){return t(this).children("a.board-card-hover").text()},selector:"span.board-card",container:"body"})},n.cardAjaxSelect2=function(e,n,a,i,o){t(n).find("option").remove(),t(n).select2({placeholder:"Type 3 letters",minimumInputLength:3,width:"100%",dataType:"json",maximumSelectionLength:o,allowClear:!0,ajax:{dataType:"json",delay:1e3,url:e,data:function(t){return{name:t.term}},processResults:function(t){return t?{results:t.map(function(t){return{text:t.name,id:t.slug}})}:{results:[]}}},multiple:a,id:function(t){return t.slug},formatResult:function(t){return t.name},formatSelection:function(t){return t.name}}),void 0!==i&&!1!==i&&(a?i!==[]&&(t.each(i,function(e,a){t(n).append('<option value="'+a+'">'+a+"</option>")}),t(n).val(i).trigger("change")):(t(n).append('<option value="'+i+'">'+i+"</option>"),t(n).val(i).trigger("change")))},n.initSpoiler=function(){t(".tapped-spoiler-btn").click(function(){t(this).closest(".tapped-spoiler").find(".tapped-spoiler-div").first().toggle()})},n.initCollectionCat=function(){t("#id_fmt").change(function(){""!=t("#id_fmt").val()&&this.form.submit()}),t("#id_cat").select2({width:"150px",placeholder:"Group",minimumResultsForSearch:-1}),t("#id_cat").change(function(){this.form.submit()}),t("#id_sort").select2({width:"150px",placeholder:"Ordering",minimumResultsForSearch:-1}),t("#id_sort").change(function(){this.form.submit()})},n.initSuggestions=function(e){t("a.suggestion-action").click(function(n){var a=t(this);direction="reject",a.data("accept")?direction="accept":a.data("maybe")&&(direction="maybe"),t.ajax({url:e,contentType:"application/json",type:"put",data:{card:a.data("card"),direction:direction,suggestion_id:a.data("suggestion_id")},success:function(){a.parent().fadeOut(function(){a.parent().remove()})},error:function(){alert("There was a problem with that action")}}),n.preventDefault()})},n}()}).call(e,n(10),n(379))},551:function(t,e,n){(function(t,e){t.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())},AUTOCOMPLETE=function(t){return t={},t.results={},t.variations={},t.init=function(n){t.cardField=n.cardField,t.cardInput=e(n.cardField),t.apiUrl=n.apiUrl,n.invField&&(t.invField=n.invField),t.cardInput.autocomplete({source:function(n,a){var i=[];e.ajax({url:t.apiUrl,data:{name:n.term,inv_only:e(t.invField).is(":checked")},dataType:"json",success:function(n){e.each(n,function(){var n=this.name;i.push(n),t.results[n.toLowerCase()]=this.all_printings,t.variations[n.toLowerCase()]={},e.each(this.all_printings,function(){t.variations[n.toLowerCase()][this.tla]=this.variations})}),1==n.length&&t.updatePrintings(n[0].name),a(i)},error:function(){t.results={},t.variations={},a(i)}})},minLength:2,delay:1e3,autofocus:!0})},t.updatePrintings=function(n){t.printingSelect.find("option").remove();var a=t.results[n.toLowerCase()];a?(t.printingSelect.append(e("<option></option>").attr("value","").text("--select one--")),e.each(a,function(){t.printingSelect.append(e("<option></option>").attr("value",this.tla).text(this.name+" ("+this.tla+")"))})):t.printingSelect.append(e("<option></option>").attr("value","").text("Card not found"))},t.initWithPrinting=function(n){t.init(n),t.printingField=n.printingField,t.printingSelect=e(n.printingField),t.variationField=n.variationField,t.variationSelect=e(n.variationField),t.variationDiv=e(n.variationField+"-div"),t.printingSelect.append(e("<option></option>").attr("value","").text("Insert card name first")),t.variationDiv.hide(),t.cardInput.focusout(function(){var n=e(this).val().toLowerCase();if(t.cardName=n,e(t.printingSelect).find("option").remove(),e(t.variationSelect).find("option").remove(),n&&!(n in t.results)&&n.length>=2)t.printingSelect.find("option").remove(),t.printingSelect.append(e("<option></option>").attr("value","").text("Card not found")),t.results={},t.variations={};else if(n&&n in t.results)t.updatePrintings(n);else{if(1==n.length)var a="Card not found";else a="Insert card name first";t.printingSelect.find("option").remove(),t.printingSelect.append(e("<option></option>").attr("value","").text(a)),t.variationDiv.hide()}}),t.printingSelect.change(function(){var n=e(this).find(":selected").val(),a="--select one--",i=t.results[t.cardName].find(function(t){return t.tla===n});i&&i.set_number&&(a=i.set_number);var o=t.variations[t.cardName][n];t.variationSelect.find("option").remove(),o.length?(t.variationSelect.append(e("<option></option>").attr("value","").text(a)),e.each(o,function(){var n=this.identifier?this.identifier:this.wizards_id;n||(n=this.code?this.code:this.number);var a=this.display?this.display:n;t.variationSelect.append(e("<option></option>").attr("value",n).text(a))}),t.variationDiv.show()):t.variationDiv.hide()})},t}()}).call(e,n(10),n(10))},552:function(t,e,n){(function(t,e){function n(n,a,i){if(r={chart:{backgroundColor:null,height:300,renderTo:"combined-chart",margin:[10,0,0,0]},credits:{enabled:!1},plotOptions:{pie:{borderColor:"#CCC",size:"60%",events:{click:function(e){var n="color";"Land colors"===e.point.series.name&&(n="mana"),t(".card").removeClass("chart-selection");var a=e.point.name.toLowerCase();-1!==a.indexOf("slow")&&(a=a.split(" (")[0]+"-slow"),-1!==a.indexOf("colorless")&&(a+="-sym"),t(".card-"+n+"-"+a).addClass("chart-selection")}},dataLabels:{enabled:!1}}},plotArea:{shadow:null,borderWidth:null,backgroundColor:null,color:"#FFFFFF"},tooltip:{formatter:function(){return'<span class="bold">'+this.y+" symbols. "+parseFloat(this.percentage).toFixed(2)+"%</span>"}},title:{text:"Card costs (outer) <br> Land mana (inner)",y:5,style:{color:"#428bca"}},legend:{enabled:!1},series:[{type:"pie",name:"Card colors",innerSize:"77%",data:n},{type:"pie",name:"Land colors",size:"45%",data:a}]},i)return r;new e.Chart(r)}function a(n,a){if(l={chart:{backgroundColor:null,height:200,renderTo:"type-chart",margin:[15,0,20,0]},credits:{enabled:!1},plotOptions:{pie:{dataLabels:{style:{color:"#EDD9B4"}},events:{click:function(e){t(".card").removeClass("chart-selection"),t(".card-type-"+e.point.name.toLowerCase()).addClass("chart-selection")}}}},plotArea:{shadow:null,borderWidth:null,backgroundColor:null},tooltip:{formatter:function(){return'<span class="bold">'+this.series.name+"</span><br/>"+this.point.name+": "+this.y}},legend:{enabled:!0,layout:"vertical",align:"left"},title:{text:null},series:[{type:"pie",name:"Type breakdown",data:n}]},a)return l;new e.Chart(l)}function i(n,a){var i=0;if(t.each(n[1],function(){var e=this.data;t.each(e,function(){i+=this})}),c={chart:{renderTo:"curve-chart",defaultSeriesType:"column",height:375,backgroundColor:null},credits:{enabled:!1},title:{text:"Mana-curve",style:{color:"#428bca"}},yAxis:{min:0,allowDecimals:!1,title:{text:""}},xAxis:{min:0,allowDecimals:!1,categories:n[0],title:{text:"Converted mana cost"}},colors:n[2],legend:{enabled:!1},tooltip:{formatter:function(){return'<span class="bold">'+this.x+"</span><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal+"<br/>Total %: "+(100*this.point.stackTotal/i).toFixed(1)+"%"}},plotOptions:{column:{stacking:"normal",groupPadding:0,events:{click:function(e){t(".card").removeClass("chart-selection"),t(".card-color-"+e.point.series.name.toLowerCase()+"-cost-"+e.point.category).addClass("chart-selection")}},dataLabels:{inside:!0,enabled:!0,color:"#FFA500",formatter:function(){return n[0].length>10?"":0===this.y?"":'<span class="bold">'+(100*this.y/i).toFixed(1)+"%</span>"}}}},plotArea:{backgroundColor:null},series:n[1]},a)return c;new e.Chart(c)}function o(n){var a=[],i=n[1],o=i.length;t.each(i,function(t,e){a.push({data:[[Date.UTC(e.start_date.year,e.start_date.month-1,e.start_date.day),t+1],[Date.UTC(e.expiry_date.year,e.expiry_date.month-1,e.expiry_date.day),t+1]],name:e.name,lineWidth:18,url:e.url})});var r=new Date,l=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()-1),c=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()+1),s={type:"area",name:"Today",marker:{enabled:!1},lineWidth:0,color:"yellow",data:[[l,0],[l,o+1],[c,o+1],[c,0]]};a.push(s);new e.Chart({chart:{defaultSeriesType:"line",renderTo:"standard-chart",height:400,backgroundColor:null},title:{text:"Standard Legal Sets",style:{color:"#428bca"}},tooltip:{dateTimeLabelFormats:{week:"%b %e, %Y",month:"%b %e, %Y"}},plotOptions:{series:{marker:{symbol:"square",radius:1}},line:{events:{legendItemClick:function(t){return this.options.url&&(window.location=this.options.url),!1}},showInLegend:!0}},legend:{enabled:!1},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b, %Y"},labels:{style:{color:"#FFFFFF"}}},yAxis:{title:{text:"Sets",style:{color:"#428bca"}},labels:{step:1,style:{color:"#FFFFFF"},formatter:function(){var t=n[0][this.value];return"undefined"!==t?t:this.value}},endOnTick:!0,max:o+1,tickInterval:1},series:a})}var r,l,c;window.buildDeckCharts=function(t){(t.colorData||t.landData)&&(n(t.colorData,t.landData),r.chart.renderTo="png-combined-chart",r.chart.height="150",r.chart.margin=[0,12,0,0],r.chart.spacingBottom=0,r.chart.spacingTop=0,r.plotOptions.pie.center=["50%","50%"],r.plotOptions.pie.size="80%",r.series[0].innersize="70%",r.series[1].size="60%",r.title.text="Card costs (outer), Land mana (inner)",r.title.y=10,r.title.style.fontSize="11px",r.title.style.fontWeight="600",new e.Chart(r)),t.typeData&&(a(t.typeData),l.chart.renderTo="png-type-chart",l.chart.height="150",l.chart.margin=[0,12,0,0],l.chart.spacingBottom=0,l.chart.spacingTop=0,l.plotOptions.pie.dataLabels.style.fontSize="10px",l.plotOptions.pie.center=["50%","50%"],l.plotOptions.pie.dataLabels.distance=15,new e.Chart(l)),t.curveData&&(i(t.curveData),c.chart.renderTo="png-curve-chart",c.chart.height="300",c.chart.marginLeft=30,c.title.text="MANA-CURVE",c.title.style.fontSize="12px",c.title.style.fontWeight="600",new e.Chart(c))},window.buildTimelineChart=function(t){new e.Chart({chart:{zoomType:"x",spacingRight:20,renderTo:"timeline-chart"},title:{text:"Deck timeline"},subtitle:{text:void 0===document.ontouchstart?"Click and drag in the plot area to zoom in":"Pinch the chart to zoom in"},xAxis:{type:"datetime",title:{text:null}},yAxis:{title:{text:"TCG average price"}},tooltip:{formatter:function(){var t=e.dateFormat("%b %e, %Y",new Date(this.x))+"  <br/> USD: <b>"+this.y+"</b>";return this.point.name&&(t="<b>"+this.point.name+"</b><br/>"+t),t}},legend:{enabled:!1},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,e.getOptions().colors[0]],[1,e.Color(e.getOptions().colors[0]).setOpacity(0).get("rgba")]]},lineWidth:1,shadow:!1,states:{hover:{lineWidth:1}},threshold:null}},series:[{type:"area",name:"USD",data:t}]})},window.buildColorChart=n,window.buildTypeChart=a,window.buildCurveChart=i,window.buildStandardChart=o}).call(e,n(10),n(339))},553:function(t,e,n){(function(t){CORE=function(e){return e={},e.initResponsiveImages=function(){t.each(t(".add-img-responsive img"),function(e,n){t(n).hasClass("mana-symbol")||t(n).hasClass("card-icon")||t(n).hasClass("foil-icon")||t(n).addClass("img-responsive")})},e.initResponsiveEmbed=function(){t.each(t(".add-embed-responsive iframe"),function(e,n){t(n).wrap('<div class="embed-responsive embed-responsive-16by9"></div>')})},e.preventEnter=function(e,n){t(e+" :input").keypress(function(t){13==t.which&&(t.preventDefault(),n&&n())})},e.preventDoubleSubmit=function(e){t(e).submit(function(){return $this=t(this),!$this.data().isSubmitted&&($this.data().isSubmitted=!0,!0)})},e.getUrlParameter=function(t){for(var e=window.location.search.substring(1),n=e.split("&"),a=0;a<n.length;a++){var i=n[a].split("=");if(i[0]===t)return i[1]}return""},e}(),window.console||(window.console={}),window.console.log||(window.console.log=function(){})}).call(e,n(10))},554:function(t,e,n){(function(t,e){TAPPED_TABLE=function(n){return n={},n.initialize=function(t,e,a){n.tableId=t,n.filterResetButtonId=a,n.filterFormId=e,n.init_html_numbers(),n.initTable(),n.filterResetButton()},n.autoFilterSearchSuffix="-search",n.init_html_numbers=function(){t.extend(t.fn.dataTableExt.oSort,{"num-html-pre":function(t){var e=String(t).replace(/<[\s\S]*?>/g,"").replace("$","");return parseFloat(e)},"num-html-asc":function(t,e){return t<e?-1:t>e?1:0},"num-html-desc":function(t,e){return t<e?1:t>e?-1:0}})},n.filterResetButton=function(){var t=e(n.tableId).dataTable();e("#"+n.filterResetButtonId).click(function(){var a=t.fnSettings();for(iCol=0;iCol<a.aoPreSearchCols.length;iCol++)a.aoPreSearchCols[iCol].sSearch="";a.oPreviousSearch.sSearch="",e("#"+n.filterFormId+" :input").each(function(){e(this).is(":checkbox")||e(this).val("").trigger("change")}),e("#"+n.filterFormId+" :checkbox").each(function(){e(this).prop("checked",!1)}),t.fnDraw()})},n.delay=function(){var t=0;return function(e,n){clearTimeout(t),t=setTimeout(e,n)}}(),n.capitalizeWords=function(t){return t=t.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),t.replace("_"," ").replace("-","")},n.inputFromColumn=function(t){return t.data("filter-input")?t.data("filter-input"):t.text().toLowerCase().replace(" ","-")+n.autoFilterSearchSuffix},n.initSearch=function(t){n.initStandardSearch(t),n.initAutoSearch(t),n.initSelectSearch(t),n.initBooleanSearch(t),n.initMultiSearch(t),n.initRangeSearch(t),n.initExcludeSearch(t),n.initToggleSearch(t)},n.initStandardSearch=function(t){t.columns(".standard-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a);i.on("change keyup paste",function(){n.delay(function(){t.search(i.val()).draw()},1e3)})})},n.initAutoSearch=function(t){t.columns(".auto-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a);i.on("change",function(){var n=e(this).val();n=n?/^/.source+n+/$/.source:n,t.search(n,regex=!0,smart=!1).draw()}),this.cache("search").sort().unique().each(function(t){var a=n.capitalizeWords(t);i.append(e('<option value="'+t+'">'+a+"</option>"))}),i.select2({width:"100%",placeholder:e(t.header()).text()})})},n.initSelectSearch=function(t){t.columns(".select-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a);i.on("change",function(){value=e(this).val(),value?(e(value).each(function(e){t.search(value[e])}),t.draw()):t.search("").draw()}),i.select2({width:"100%",placeholder:e(t.header()).text()})})},n.initBooleanSearch=function(t){t.columns(".boolean-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header()));e("#"+a).on("change",function(){e(this).is(":checked")?t.search("true|1",regex=!0).draw():t.search("").draw()})})},n.initMultiSearch=function(t){t.columns(".multi-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a);i.on("change",function(){var n=!0;e("#"+a+" :selected").each(function(a,i){t.search(e(i).val()),n=!1}),n?t.search("").draw():t.draw()}),a.includes("set")?i.select2({width:"100%",placeholder:e(t.header()).text(),templateSelection:window.iformat,templateResult:window.iformat,escapeMarkup:function(t){return t}}):i.select2({width:"100%",placeholder:e(t.header()).text()})})},n.initRangeSearch=function(t){t.columns(".range-search").every(function(){var a=this,i=n.inputFromColumn(e(a.header())),o=e("#"+i+"_0"),r=e("#"+i+"_1");e.fn.dataTable.ext.search.push(function(t,e,n){var i=parseFloat(o.val()),l=parseFloat(r.val()),c=parseFloat(e[a.index()].replace("$",""))||0;return!!(isNaN(i)&&isNaN(l)||isNaN(i)&&c<=l||i<=c&&isNaN(l)||i<=c&&c<=l)}),o.on("change keyup paste",function(){n.delay(function(){t.draw()},1e3)}),r.on("change keyup paste",function(){n.delay(function(){t.draw()},1e3)})})},n.initExcludeSearch=function(t){t.columns(".exclude-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a);i.on("change",function(){var n=!0,i="";e("#"+a+" :selected").each(function(t,a){0!=t&&(i+="|"),i+=e(a).val(),n=!1}),n?t.search("").draw():t.search("^((?!"+i+").)*$",regex=!0,smart=!1).draw()}),i.select2({width:"100%",placeholder:e(t.header()).text()})})},n.initToggleSearch=function(t){t.columns(".toggle-search").every(function(){var t=this,a=n.inputFromColumn(e(t.header())),i=e("#"+a),o=e("#"+a+"-opt");i.on("change keyup paste",function(){var e=!o.val();n.delay(function(){var n=i.val();n?(e&&(n="(^|s)"+n+"(s|$)"),t.search(n,regex=!0,smart=!1).draw()):t.search("").draw()},1e3)}),o.on("change",function(){i.trigger("change")})})},n.initSearchInput=function(t,a){e(t).on("change keyup paste",function(){n.delay(function(){a.draw()},1e3)})},n}()}).call(e,n(10),n(10))},555:function(t,e,n){(function(t){BOARDFORM=function(){var e={};return e.init=function(n){e.nameId="#id_"+n+"-card_name",e.qtyId="#id_"+n+"-qty",e.boardId="#id_"+n+"-board",e.collectionId="#id_"+n+"-collection",e.foilId="#id_"+n+"-foil",e.langId="#id_"+n+"-language",e.alterId="#id_"+n+"-alter",e.alterCodeId="#id_"+n+"-alter_code",e.signedId="#id_"+n+"-signed",e.printingId="#id_"+n+"-printing",e.variationId="#id_"+n+"-variation",e.condId="#id_"+n+"-condition",e.altRarityId="#id_"+n+"-alternate_rarity",e.altCMCId="#id_"+n+"-alternate_cmc",e.altManaCostId="#id_"+n+"-alternate_mana_cost",e.altColorId="#id_"+n+"-alternate_color",e.printingInput=t(e.printingId),e.variationInput=t(e.variationId),e.nameInput=t(e.nameId),e.foilInput=t(e.foilId),e.qtyInput=t(e.qtyId),e.alterInput=t(e.alterId),e.alterCodeInput=t(e.alterCodeId),e.signedInput=t(e.signedId),e.langInput=t(e.langId),e.boardInput=t(e.boardId),e.collectionInput=t(e.collectionId),e.condInput=t(e.condId),e.altRarityInput=t(e.altRarityId),e.altCMCInput=t(e.altCMCId),e.altManaCostInput=t(e.altManaCostId),e.altColorInput=t(e.altColorId),t("#board-pills a").click(function(){var n=t(this).closest("li").attr("id").replace("-pill","");e.boardInput.val(n)}),e.altColorInput.select2({width:"100%"}),t("#card-add-alts").click(function(){var e=t(this).find("span");e.hasClass("glyphicon-chevron-right")?e.removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down"):e.removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right")})},e.submit=function(){if(""!=e.nameInput.val()){e.boardInput.val()?e.cardBoardInput=t("#id_"+e.boardInput.val().toLowerCase()):e.cardBoardInput=t("#id_board");var n=e.formToString();e.cardBoardInput.val()&&(n="\r"+n),e.cardBoardInput.val(e.cardBoardInput.val()+n),e.switchBoardTab(),e.resetForm(),e.nameInput.focus()}},e.switchBoardTab=function(){t("#board-pills li").each(function(){t(this).removeClass("active")}),t("#"+e.boardInput.val()+"-pill").addClass("active"),t("#board-fields div").each(function(){t(this).removeClass("active")}),e.boardInput.val()&&t("#"+e.boardInput.val().toLowerCase()).addClass("active")},e.resetForm=function(){e.nameInput.val(""),e.qtyInput.val(""),e.foilInput.val(""),e.alterInput.attr("checked",!1),e.alterCodeInput.val(""),e.signedInput.attr("checked",!1),e.variationInput.find("option").remove(),e.printingInput.find("option").remove(),e.printingInput.append(t("<option></option>").attr("value","").text("Insert card name first")),e.langInput.val("EN"),e.condInput.val("NM"),e.altRarityInput.val(""),e.altCMCInput.val(""),e.altManaCostInput.val(""),e.altColorInput.attr("value",""),e.altColorInput.select2("val","")},e.formToString=function(){var n="",a=e.qtyInput.val();if(t.isNumeric(a)&&""!=a||(a="1"),n+=a+"x ",n+=e.nameInput.val(),null!=e.printingInput.val()&&""!=e.printingInput.val()){var i=e.printingInput.val();null!=e.variationInput.val()&&""!=e.variationInput.val()&&(i+=":"+e.variationInput.val()),n+=" ("+i+")"}"foil"===e.foilInput.val()?n+=" *F*":e.foilInput.val()&&(n+=" *F:"+e.foilInput.val()+"* "),e.alterInput.is(":checked")&&(e.alterCodeInput.val()?n+=" *A="+e.alterCodeInput.val()+"* ":n+=" *A* "),e.signedInput.is(":checked")&&(n+=" *S*");var o=e.langInput.val()||"EN";"EN"!=o&&(n+=" *"+o+"*");var r=e.condInput.val()||"NM";"NM"!=r&&(n+=" *"+r+"*");var l=e.altRarityInput.val();l&&(n+=" *"+l+"*");var c=e.altCMCInput.val();(c||0===c)&&(n+=" *CMC="+c+"*");var s=e.altManaCostInput.val();(s||0===s)&&(n+=" *COST="+s+"*");var d=e.altColorInput.val();return d&&(n+=" *COLOR="+d+"*"),n},e}()}).call(e,n(10))},556:function(t,e,n){(function(t){CARD_ADD_FLOW=function(e){return e={},e.resultClass=".cardAdd-searchresult",e.resultTemplate="#cardAdd-result-template",e.resultsModalId="#cardAdd-results-modal",e.resultsTbodyId="#cardAdd-results-tbody",e.searchModalId="#cardAdd-searchform-modal",e.searchFormId="form#cardAdd-searchform",e.submitFormModalId="#cardAdd-submitform-modal",e.submitTemplate="#cardAdd-submit-template",e.submitButton="#cardAdd-submit",e.submitFormId="#cardAdd-submitform",e.backSearchId="#cardAdd-back-to-search",e.backResultsId="#cardAdd-back-to-results",e.init=function(){t(e.backSearchId).click(function(){t(e.searchModalId).modal("show"),t(e.resultsModalId).modal("hide")}),t(e.backResultsId).click(function(){t(e.resultsModalId).modal("show"),t(e.submitFormModalId).modal("hide")}),t(e.searchFormId).submit(function(n){t.ajax({url:t(this).attr("action"),data:t(this).serialize(),dataType:"json",success:e.displayResults}),n.preventDefault()}),t(e.submitFormId).on("submit",function(n){t(e.submitFormModalId).modal("hide"),BOARDFORM.submit(),n.preventDefault()}),t(e.submitButton).on("click",function(n){t(e.submitFormModalId).modal("hide"),BOARDFORM.submit(),n.preventDefault()})},e.displayResults=function(n){t(e.resultsTbodyId).empty();var a={};t(n).each(function(){a[this.name]=this.all_printings,t(e.resultTemplate).tmpl(this).appendTo(t(e.resultsTbodyId))}),t("a[rel=popover]").popover({html:!0,trigger:"hover",content:function(){return'<img src="'+this.dataset.cardImg+'"/>'}}),t(e.searchModalId).modal("hide"),t(e.resultsModalId).modal("show"),t(e.resultClass).click(function(n){var i=t(e.submitFormModalId);t(e.resultsModalId).modal("hide"),i.modal("show");var o=i.find(".modal-body")[0];t(o).html("");var r={};r.image_medium=this.dataset.cardImg,r.name=this.text,t(e.submitTemplate).tmpl(r).appendTo(o),CORE.preventEnter(e.submitFormModalId,function(){t(CARD_ADD_FLOW.submitButton).trigger("click")}),BOARDFORM.init("card-add-adv");var l=t("#id_card-add-adv-printing");l.append(t("<option></option>").attr("value","").text("--select one--")),t.each(a[this.text],function(){l.append(t("<option></option>").attr("value",this.tla).text(this.name))}),n.preventDefault()})},e}()}).call(e,n(10))},557:function(t,e,n){(function(t){function e(t){var e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=t.match(e);return!(!n||11!=n[7].length)&&n[7]}function n(t,e,n,a){var i=t.getSelection().start;t.replaceSelection(e),t.setSelection(i+n,i+a)}function a(t,e,n){var a=t.getSelection(),i=n?a.start+e.indexOf(":")+1:a.start+e.length;t.replaceSelection(e),t.setSelection(i,i)}var i={name:"groupMtg",data:[{name:"cmdUser",toggle:!1,title:"User Link",icon:"glyphicon glyphicon-user",callback:function(t){a(t,"[[user:]]",!0)}},{name:"cmdDeck",toggle:!1,title:"Deck Link",icon:"glyphicon glyphicon-book",callback:function(t){a(t,"[[deck:]]",!0)}},{name:"cmdCard",toggle:!1,title:"Card Link",icon:"glyphicon glyphicon-file",callback:function(t){a(t,"[[card:]]",!0)}},{name:"cmdMana",toggle:!1,title:"Add Mana Symbol",icon:"glyphicon glyphicon-tint mana-menu-icon",callback:function(e){var n=t("#mana-symbol-menu"),a=e.$textarea.parent().find(".mana-menu-icon");n.show().position({my:"center top",at:"center bottom",of:a})}}]},o={name:"groupBlocks",data:[{name:"spoilerBlock",toggle:!1,title:"Spoiler block",icon:"glyphicon glyphicon-exclamation-sign",callback:function(t){n(t,"===spoiler:Title goes here\nContent goes here\n===endspoiler\n",11,26)}},{name:"accordionBlock",toggle:!1,title:"Accordion block",icon:"glyphicon glyphicon-align-justify",callback:function(t){n(t,"===accordion\n===panel:Title goes here\nContent goes here\n===endpanel\n===panel:Title goes here\nContent goes here\n===endpanel\n===endaccordion\n",22,37)}},{name:"codeBlock",toggle:!1,title:"Code block",icon:"glyphicon glyphicon-asterisk",callback:function(t){n(t,"===code\nCode goes here\n===endcode\n",8,22)}},{name:"cardBlock",toggle:!1,title:"Custom Card",icon:"glyphicon glyphicon-modal-window",callback:function(t){n(t,"===card\nName:Name goes here\nMana Cost: Mana cost goes here, each symbol wrapped in {}\nType: Type goes here\nSubtype:\nP/T:\nPlaneswalker Loyalty:\n===rules:\nRules go here\n===endrules\n===endcard\n",13,27)}}]},r=t.extend(!0,[],o.data);r.push({name:"youtubeBlock",toggle:!1,title:"Youtube Embed",icon:"glyphicon glyphicon-play",callback:function(n){var a,i=n.getSelection();n.getContent();if(null!==(a=prompt(n.__localize("Insert youtube video url"),"http://"))&&""!==a&&"http://"!==a&&"http"===a.substr(0,4)){var o=t("<div>"+a+"</div>").text(),r=e(o),l='<iframe src="https://www.youtube.com/embed/'+r+'" allowfullscreen></iframe>',c=l.length;n.replaceSelection(l),n.setSelection(i.start+c,i.start+c)}}});var l={name:"groupBlocks",data:r};window.setCommentsEditor=function(){t("#mana-symbol-menu").menu().hide().removeClass("hide"),t("#id_comment, .markdown-help-bar").each(function(e,r){var c=["id_profile_text","id_description"].indexOf(t(r).attr("id"))>-1?l:o;t(r).markdown({additionalButtons:[[i,c]],hiddenButtons:["cmdPreview","cmdQuote","cmdCode"],resize:"both",fullscreen:{enable:!1},onShow:function(e){t("#mana-symbol-menu").on("click","li.mana-symbol-button",{editor:e},function(e){var i=t(this).data("mana");"loyalty-plus"===i?n(e.data.editor,"[[symbol:"+i+"]]",21,21):"loyalty-minus"===i?n(e.data.editor,"[[symbol:"+i+"]]",22,22):"loyalty-initial"===i?n(e.data.editor,"[[symbol:"+i+"]]",24,24):a(e.data.editor,"[[symbol:"+i+"]]",!1),t("#mana-symbol-menu").hide()})}})}),t(window).resize(function(){t("#mana-symbol-menu").hide()}),t(document).click(function(e){var n=t("#mana-symbol-menu"),a=t(".mana-menu-icon");a.is(e.target)||a.parent().is(e.target)||n.is(e.target)||0!==n.has(e.target).length||n.hide()})}}).call(e,n(10))},558:function(t,e,n){(function(t){COMMENTDRAFT=function(){var e={};return e.isEmpty=function(t){return!t.replace(/\s/g,"")},e.init=function(n,a,i,o){e.saving=!1,e.draftInterval=null,e.object_id=n,e.ctype_id=a,e.url=i,e.textarea_id=o,t(o).on("keyup paste",function(){var n=t(this).val();e.isEmpty(n)?(e.updateDraft(),e.saving=!1,e.draftInterval&&clearInterval(e.draftInterval)):e.saving||(e.saving=!0,e.draftInterval=setInterval(function(){e.updateDraft()},1e4))})},e.updateDraft=function(){var n=t(e.textarea_id).val();e.isEmpty(n)&&(n=""),t.ajax({type:"POST",url:e.url,data:{text:n,object_id:e.object_id,content_type_id:e.ctype_id},success:function(){e.saving=!1,e.draftInterval&&clearInterval(e.draftInterval)}})},e}()}).call(e,n(10))},559:function(t,e,n){(function(t){REACTIONS=function(e){return e={},e.initialize=function(){t("body").on("click",".reactions-upvote",function(){var e=t(this);e.prop("disabled",!0);var n=e.data("comment-id"),a=e.data("comment-url");t.ajax({url:a,type:"post",success:function(a){e.removeClass("btn-primary reactions-upvote").addClass("btn-success").text("Upvoted");var i=parseInt(t("#upvote-score-"+n).text())+1;t("#comment-upvote-cnt-"+n).html('<button class="btn btn-xs">'+i+' <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>'),e.remove()},error:function(a){e.prop("disabled",!1);var i=t("#comment-reaction-error-"+n);a.responseJSON&&a.responseJSON.error?i.html('<p id="upvote-error-msg-'+n+'">'+a.responseJSON.error+"</p>"):i.html('<p id="upvote-error-msg-'+n+'">There was an error while upvoting, please try again later.</p>'),setTimeout(function(){t("#upvote-error-msg-"+n).fadeOut()},1e4)}})})},e}()}).call(e,n(10))},560:function(t,e){},562:function(t,e){},563:function(t,e){},564:function(t,e){},565:function(t,e){}},[516]);